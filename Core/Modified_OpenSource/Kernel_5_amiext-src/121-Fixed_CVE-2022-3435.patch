diff -Naur linux_org/net/ipv4/fib_semantics.c linux/net/ipv4/fib_semantics.c
--- linux_org/net/ipv4/fib_semantics.c	2023-01-05 15:20:12.482425744 +0800
+++ linux/net/ipv4/fib_semantics.c	2023-01-05 15:28:15.865068116 +0800
@@ -846,6 +846,12 @@
 		return 1;
 	}
 
+	if (fi->nh) {
+		if (cfg->fc_oif || cfg->fc_gw_family || cfg->fc_mp)
+			return 1;
+		return 0;
+	}
+
 	if (cfg->fc_oif || cfg->fc_gw_family) {
 		struct fib_nh *nh = fib_info_nh(fi, 0);
 
